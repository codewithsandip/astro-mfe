---
const tabs = [
  { label: "Vite Remote", value: "vite" },
  { label: "Webpack Remote", value: "webpack" },
];
---

<nav class="tabs">
  {tabs.map((tab) => (
    <button
      type="button"
      class="tab-button"
      data-tab={tab.value}
    >
      {tab.label}
    </button>
  ))}
</nav>

<style>
  nav.tabs {
    display: flex;
    gap: 24px;
    padding: 0 24px;
    margin-top: 6px;
    border-bottom: 1px solid #e2e8f0;
  }

  .tab-button {
    background: none;
    border: none;
    padding: 12px 0;
    font-size: 0.95rem;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    color: #475569;
  }

  .tab-button.active {
    border-bottom-color: #2563eb; /* highlight border */
    color: #111827;
    font-weight: 600;
  }
</style>

<script>
  // This script runs in the browser for this component
  if (typeof window !== "undefined") {
    const updateRemote = (tab) => {
      // Persist active tab between reloads (optional)
      try {
        localStorage.setItem("activeTab", tab);
      } catch {}

      // Update active tab classes
      const buttons = document.querySelectorAll("nav.tabs .tab-button");
      buttons.forEach((btn) => {
        btn.classList.toggle("active", btn.dataset.tab === tab);
      });

      // Swap the remote Web Component in the container
      const container = document.getElementById("remote-container");
      if (!container) return;
      container.innerHTML = "";

      const tag = tab === "vite" ? "remote-vite-app" : "remote-webpack-app";
      const el = document.createElement(tag);
      container.appendChild(el);
    };

    document.addEventListener("DOMContentLoaded", () => {
      const buttons = document.querySelectorAll("nav.tabs .tab-button");

      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const tab = btn.dataset.tab;
          if (!tab) return;
          updateRemote(tab);
        });
      });

      // Initial tab on first load
      let initial = "vite";
      try {
        initial = localStorage.getItem("activeTab") || "vite";
      } catch {}

      updateRemote(initial);
    });
  }
</script>
