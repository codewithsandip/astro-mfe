---
import Logo from "../components/Logo.astro";
import MainNav from "../components/MainNav.astro";

const isDev = import.meta.env.DEV;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Astro Shell</title>

    <!-- Global shell styles (LESS/CSS/etc) -->
    <style is:global>
      /* ... your global styles ... */
    </style>

    {isDev ? (
      <>
        <!-- React-refresh preamble for Vite dev React apps -->
        <script type="module" is:inline>
          import RefreshRuntime from "http://localhost:5173/@react-refresh";
          RefreshRuntime.injectIntoGlobalHook(window);
          window.$RefreshReg$ = () => {};
          window.$RefreshSig$ = () => (type) => type;
          window.__vite_plugin_react_preamble_installed__ = true;
        </script>

        <!-- Vite dev client (HMR) -->
        <script type="module" src="http://localhost:5173/@vite/client"></script>

        <!-- Your Vite remote entry in dev -->
        <script type="module" src="http://localhost:5173/src/main.tsx"></script>
      </>
    ) : (
      <>
        <!-- Production remote bundle(s) -->
        <script src="/remotes/vite/remote-vite-app.iife.js"></script>
      </>
    )}
  </head>

  <body>
    <header class="app-header">
      <div class="header-left">
        <Logo size={32} />
        <span class="app-title">My Micro-Frontend Platform</span>
      </div>

      <div class="header-right">
        <button class="header-button">Docs</button>
        <button class="header-button">Support</button>
        <div class="user-avatar" aria-label="User"></div>
      </div>
    </header>

    <MainNav />

    <main id="remote-container"></main>
  </body>
</html>

